<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
  <title>Records</title>
</head>

<body class="min-h-screen bg-gray-100 text-gray-900 flex justify-center">

  <div class="max-w-screen-xl m-0 sm:m-20 bg-white shadow sm:rounded-lg flex justify-center flex-1 mt-8">

    <div class="p-6 sm:p-12">
      <div class="flex justify-between items-center">
        <h1 class="text-2xl xl:text-3xl font-extrabold">
          Student Records
        </h1>
        <a href="registration.html" class="px-4 py-2 bg-indigo-500 text-white rounded-lg">
          Add New Record
        </a>
      </div>
      <div class="overflow-x-auto mt-8">
        <table class="w-full table-fixed">
          <thead>
            <tr>
              <th class="px-6 py-3 bg-indigo-500 text-gray-100 font-semibold">
                Name
              </th>
              <th class="px-6 py-3 bg-indigo-500 text-gray-100 font-semibold">
                Gender
              </th>
              <th class="px-6 py-3 bg-indigo-500 text-gray-100 font-semibold">
                Email
              </th>
              <th class="px-6 py-3 bg-indigo-500 text-gray-100 font-semibold">
                Address
              </th>
              <th class="px-6 py-3 bg-indigo-500 text-gray-100 font-semibold">
                Actions
              </th>
            </tr>
          </thead>
          <tbody id="records-table-body">
          </tbody>
        </table>
      </div>
    </div>

  </div>

  <script>
    function fetchRecords() {
      fetch("fetch-records.php")
        .then(response => response.json())
        .then(records => {
          const tableBody = document.getElementById("records-table-body");
          tableBody.innerHTML = "";

          records.forEach(record => {
            const row = document.createElement("tr");

            const nameCell = document.createElement("td");
            nameCell.textContent = record.name;
            nameCell.classList.add("px-6", "py-2");
            row.appendChild(nameCell);

            const genderCell = document.createElement("td");
            genderCell.textContent = record.gender;
            genderCell.classList.add("px-6", "py-2");
            row.appendChild(genderCell);

            const emailCell = document.createElement("td");
            emailCell.textContent = record.email;
            emailCell.classList.add("px-6", "py-2");
            row.appendChild(emailCell);

            const addressCell = document.createElement("td");
            addressCell.textContent = record.address;
            addressCell.classList.add("px-6", "py-2");
            row.appendChild(addressCell);

            const actionsCell = document.createElement("td");
            actionsCell.classList.add("px-6", "py-2");

            const editButton = document.createElement("button");
            editButton.textContent = "Edit";
            editButton.classList.add("px-4", "py-2", "bg-indigo-500", "text-white", "rounded-lg", "mr-2");
            editButton.addEventListener("click", () => {
              // Implement your edit functionality here
            });
            actionsCell.appendChild(editButton);

            const deleteButton = document.createElement("button");
            deleteButton.textContent = "Delete";
            deleteButton.classList.add("px-4", "py-2", "bg-red-500", "text-white", "rounded-lg");
            deleteButton.addEventListener("click", () => {
              if (confirm("Are you sure you want to delete this record?")) {
                fetch(`delete-record.php?id=${record.id}`, {
                  method: "POST"
                })
                .then(response => {
                  if (response.ok) {
                    alert("Record deleted successfully");
                    fetchRecords();
                  } else {
                    alert("Error deleting record");
                  }
                })
                .catch(error => {
                  console.error(error);
                  alert("Error deleting record");
                });
              }
            });
            actionsCell.appendChild(deleteButton);

            row.appendChild(actionsCell);

            tableBody.appendChild(row);
          });
        })
        .catch(error => {
          console.error(error);
          alert("Error fetching records");
        });
    }

    fetchRecords();
  </script>

</body>

</html>
